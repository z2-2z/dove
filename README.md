# dove

`dove` is my own static site-generator that generates the blog that I host on [z2-2z.github.io](https://z2-2z.github.io/).

It comes with a combination of features that I could not find in other generators:
- __scientific__: I wanted to follow conventions in scientific papers like
                  numbering and labelling graphs and tables and having a BibTex-like citation
                  system that automatically generates a bibliography
- __minimal__: the generator itself and the generated output shall be as small as possible.
               Currently, pages generated by `dove` have an average weight of \~ 256KB
- __modern__: minimalism could also go into the "phrack" direction of displaying pure
              7-bit ASCII text but I wanted to follow modern design principles
- __extendable__: If I ever think that a feature is missing, I can quickly add it

## CLI
### Subcommand render
`dove render` should be run out of the repository while `--input`, `--output` and `--cache` point to corresponding files/folders.

| Switch                 | Description                                                             |
|------------------------|-------------------------------------------------------------------------|
| -i, --input \<DIR>     | The folder that contains the source of all posts                        |
| -o, --output \<DIR>    | The folder that holds the generated html pages                          |
| -c, --cache \<FILE>    | The build cache for the blog                                            |
| -f, --force            | Disable incremental builds and force rendering of all posts even if their source has not been modified |
| -o, --offline          | Do not check whether any URLs used in the posts point to valid resources |
| -l, --live             | Keep the generator running and immediately rerender pages when the source files have changed |
| --static-folder \<DIR> | Path to dove's folder with static files (default: `./static/`)          |

### Subcommand new
Execute `dove new <post-id>` to create a new post with the given id.

## Input Folder
`dove` recursively scans through the input folder and treats every file ending in `.md` as a blog post.

## Post Format
Each `.md` file must have the following structure:

### Metadata
Before the content of a blog post comes a section with metadata. The metadata is organized as key-value
pairs and is written like so:
```
<key>: <value>
```

The following keys are supported:

| Key        | Description                                                                                                                                                      |
|------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| date       | The publication date of the blog post in the format: `DD.MM.YYYY` (required)                                                                                     |
| categories | The categories of the post separated by `,` (required)                                                                                                           |
| mirror     | If the actual content of the post is hosted somewhere else but it shall still appear on this blog you can set the value to a URL which points to the actual post |
| startpage  | Indicates whether the post shall be listed on the front page of the blog (default: `false`)                                                                      |
| draft  | If a post is marked as a draft, then it will only be rendered in live mode (default: `false`)                                                                      |

### Markdown content
`dove` supports all [commonmark](https://commonmark.org/) directives and the following custom directives:

| Element                          | Description                                                                                                                               |
|----------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| \<table-title>...\</table-title>   | Put this before a table to set the description of the table                                                                               |
| \<figure-title>...\</figure-title> | Put this before an image to set the description of the image                                                                              |
| \<cite>...\</cite>                 | Use this to create a citation of a source identified by a symbolic name that comes between the tags. Multiple sources are also supported. |
| \<blank-line>                     | Inserts a blank line at the given position                                                                                                |

### Bibliography
The bibliography comes at the end of the document and is created by putting a separator `---` after the content.
After the separator come the entries of the bibliography in form of `<ref>` tags:
```
<ref id="...">...</ref>
```
The id of a reference is the symbolic name that has been used inside `<cite>` elements. Inside the reference tag you can put
normal markdown.

## Example Post
```
date: 01.01.1970
categories: catname1, catname2
startpage: true

# Title Of Blog Post

Content of blog post in __normal__ [markdown](...).

<bank-line/>

<table-title>Table description</table-title>

| Item         | Price | # In stock |
|--------------|:-----:|-----------:|
| Juicy Apples |  1.99 |        739 |
| Bananas      |  1.89 |          6 |

||||
|--------------|:-----:|-----------:|
| Juicy Apples |  1.99 |        739 |
| Bananas      |  1.89 |          6 |

<figure-title>Image description</figure-title>
![](./test.png)

I am citing <cite>id1, id2</cite>.

---
<ref id="id1">some __markdown__: probably a [link](somewhere)</ref>
<ref id="id2">or just some text</ref>
```

